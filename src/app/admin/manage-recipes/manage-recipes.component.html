<div class="container-fluid">
    <div class="row">
        <div class="col-lg-2 bg-success">
            <app-sidebar></app-sidebar>
        </div>

        <div class="col-10">
            <!-- for Dynamicaly handle heading of edit and add recipe details form -->
            <h1 class="text-center text-secondary fw-bolder my-5">{{isEditMode ? 'Edit' : 'Add'}}Recipe Details</h1>

            <div class="container my-5 text-center rounded p-3 shadow w-75">
                <!-- top image ,without using if condn ,if we not given url,no-image shown above in the form,so we se if at time of enter url only image shows-->
                 @if (recipeDetails.image) {
                <img width="100px" [src]="recipeDetails.image" alt="no image">
                 }

                <div class="row mt-3">
                    <!-- 1 st column -->
                    <div class="col-6">

                        <div class="mb-2">
                            <input type="text" [(ngModel)]="recipeDetails.name" placeholder="recipe name" class="form-control" >
                        </div>

                        <div class="mb-2">
                            <input type="text" [(ngModel)]="recipeDetails.prepTimeMinutes" placeholder="recipe prep time" class="form-control" >
                        </div>

                        <div class="mb-2">
                            <label for="cuisine">choose your cuisine</label>
                            <select  [(ngModel)]="recipeDetails.cuisine" >
                                <option value="" disabled selected hidden>choose cuisine type</option>
                                <option value="Italian">Italian</option>
                                <option value="Asian">Asian</option>
                                <option value="American">American</option>
                                <option value="Mexican">Mexican</option>
                                <option value="Pakistani">Pakistani</option>
                                <option value="Japaneese">Japaneese</option>
                                <option value="Thai">Thai</option>
                                <option value="Indian">Indian</option>
                                <option value="Turkish">Turkish</option>
                                <option value="Smoothie">Smoothie</option>
                            </select>
                        </div>


                        <div class="mb-2">
                            <input type="text" [(ngModel)]="recipeDetails.image"  placeholder="image URL" class="form-control" >
                        </div>


                        <div class="mb-2">
                            <div class="d-flex align-items-center mb-2">
                                <textarea #ingredientsInput placeholder="Ingredients" class="form-control"></textarea>
                                <button (click)="addIngredients(ingredientsInput.value)" class="btn btn-primary ms-2">+</button>
                            </div>
                        </div>

                        @if (ingredients.length>0) {
                            @for (item of ingredients; track $index) {
                   
                        <div class="mb-2">
                            <div class="d-flex align-items-center mb-2">
                                <input [value]="item" type="text" placeholder="Ingredients" class="form-control">
                                <button (click)="removeIngredients(item)" class="btn"><i class="fa-solid fa-trash text-danger"></i></button>
                            </div>
                        </div>
                         }

                        }



                    </div>

                    <!--2 next column -->
                    <div class="col-6">

                        <div class="mb-2">
                            <input type="text" [(ngModel)]="recipeDetails.cookTimeMinutes" placeholder="recipe cooking time" class="form-control" >
                        </div>

                        <div class="mb-2">
                            <input type="text" [(ngModel)]="recipeDetails.servings"  placeholder="recipe servings" class="form-control" >
                        </div>

                        <div class="mb-2">
                            <label for="difficulty">choose your mode of cooking</label>
                            <select  [(ngModel)]="recipeDetails.difficulty" >
                                <option value="" disabled selected hidden>choose cooking type</option>
                                <option value="Easy">Easy</option>
                                <option value="Medium">Medium</option>
                                <option value="Hard">Hard</option>
                            </select>
                        </div>


                        <div class="mb-2">
                            <input type="text" [(ngModel)]="recipeDetails.caloriesPerServing" placeholder="calories per unit" class="form-control" >
                        </div>


                        <div class="mb-2">
                            <div class="d-flex align-items-center mb-2">
                                <textarea #instructionsInput placeholder="Instructions" class="form-control"></textarea>
                                <button (click)="addInstructions(instructionsInput.value)" class="btn btn-primary ms-2">+</button>
                            </div>
                        </div>

                        @if(instructions.length>0){
                            @for (item of instructions; track $index) {
                        
                        <div class="mb-2">
                            <div class="d-flex align-items-center mb-2">
                                <input [value]="item" type="text" placeholder="Instructions" class="form-control">
                                <button (click)="removeInstructions(item)" class="btn"><i class="fa-solid fa-trash text-danger"></i></button>
                            </div>
                        </div>
                        }
                    }

                    </div>
                </div>


                <!-- Mealtype -->
                <div class="mb-2">
                    <div class="border rounded p-2">
                        choose Meal-Type :
                        @for (item of mealType; track $index) { 
                              <span class="mb-2">
                               {{item}}
                              </span>
                        }
                      
                        <div class="d-flex justify-content-between">

                            <div class="border rounded p-1 me-2">
                                <label for="Dinner">
                                    <!-- using name-tag=> event is conneted with target.name ----here we used [checked] for already selected data to be checked while edit recipe-->
                                    <input [checked]="mealType.includes('Dinner')" (change)="mealTypeSelect($event)" type="checkbox" id="Dinner" name="Dinner">
                                    Dinner
                                </label>
                            </div>

                            <div class="border rounded p-1 me-2">
                                <label for="Lunch">
                                    <input [checked]="mealType.includes('Lunch')" (change)="mealTypeSelect($event)" type="checkbox" id="Lunch" name="Lunch">
                                    Lunch
                                </label>
                            </div>

                            <div class="border rounded p-1 me-2">
                                <label for="Dessert">
                                    <input [checked]="mealType.includes('Dessert')" (change)="mealTypeSelect($event)" type="checkbox" id="Dessert" name="Dessert">
                                    Dessert
                                </label>
                            </div>

                            <div class="border rounded p-1 me-2">
                                <label for="Appetizer">
                                    <input [checked]="mealType.includes('Appetizer')" (change)="mealTypeSelect($event)" type="checkbox" id="Appetizer" name="Appetizer">
                                    Appetizer
                                </label>
                            </div>

                            <div class="border rounded p-1 me-2">
                                <label for="Breakfast">
                                    <input [checked]="mealType.includes('Breakfast')" (change)="mealTypeSelect($event)" type="checkbox" id="Breakfast" name="Breakfast">
                                    Breakfast
                                </label>
                            </div>

                            <div class="border rounded p-1 me-2">
                                <label for="Beverage">
                                    <input [checked]="mealType.includes('Beverage')" (change)="mealTypeSelect($event)" type="checkbox" id="Beverage" name="Beverage">
                                    Beverage
                                </label>
                            </div>

                            <div class="border rounded p-1 me-2">
                                <label for="Salad">
                                    <input [checked]="mealType.includes('Salad')" (change)="mealTypeSelect($event)" type="checkbox" id="Salad" name="Salad">
                                    Salad
                                </label>
                            </div>

                        </div>
                    </div>
                </div>
                <!--common use of fn submitrecipe for both edit and add condn-- for Dynamicaly handle button name of edit and add recipe details form  -->
                <button class="btn btn-primary" (click)="submitRecipe()">{{isEditMode?'edit-Recipe' :"add new recipe"}}</button>

            </div>
        </div>
    </div>
</div>
